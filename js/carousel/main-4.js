define(function(require){"use strict";var carousel=require("carousel"),helpers=require("helpers");return function(){var self={cacheDom:function(){self.dom={};self.dom.window=$(window);self.dom.carouselConfiguration=$("#carousel-configuration");self.dom.slideshow=$("#body-slideshow");self.dom.innerLink=$(self.dom.slideshow).find(".carousel-inner-link")},setModel:function(){var configuration=helpers.parsePageDataJSON(self.dom.carouselConfiguration).BodySlideshowConfiguration;self.model=$.extend({},configuration)},init:function(){self.cacheDom();self.setModel();self.fireCarousel();self.setOverlayClass();return self},fireCarousel:function(){if(self.dom.slideshow.length){self.carousel=carousel.create();self.carousel.init({autoDuration:self.model.transition,hasPagers:false,carouselEl:self.dom.slideshow,advanceSlideOnClick:true,after:self.afterCallback})}},afterCallback:function(){self.positionPagination(self.carousel.settings.paginationClass);var isDesktop=false;self.dom.window.on("resize",function(){if(!isDesktop&&$(this).width()>1024){isDesktop=true;self.positionPagination(self.carousel.settings.paginationClass)}else if($(this).width()<=1024){isDesktop=false}})},setOverlayClass:function(){if(self.dom.innerLink.length!==0){self.dom.slideshow.find(".overlay").addClass("fixed-height")}},positionPagination:function(paginationClass){var newRight=parseInt(self.dom.innerLink.css("right"))+parseInt(self.dom.innerLink.css("width"));newRight+=15;self.dom.slideshow.find("."+paginationClass).css("right",newRight)}};return self.init()}()});
